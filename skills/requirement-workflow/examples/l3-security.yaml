id: "20240115_003_feature_payment-system"
name: "payment-system"
type: "feature"
level: "L3"
status: "DESIGNING"
description: "Implement secure payment processing with PCI compliance"
tags: [payment, security, pci, compliance]
project_root: "/path/to/project"
created_at: "2024-01-14T08:00:00Z"
updated_at: "2024-01-16T10:00:00Z"

current_stage:
  name: DESIGNING
  progress: 40
  waiting_for: "Security architecture review"

state_history:
  - state: "INIT"
    entered_at: "2024-01-14T08:00:00Z"
    exited_at: "2024-01-14T08:10:00Z"
    duration_seconds: 600
    
  - state: "ANALYZING"
    entered_at: "2024-01-14T08:10:00Z"
    exited_at: "2024-01-14T14:00:00Z"
    duration_seconds: 21000
    artifacts:
      - spec.md
    injected_agents:
      pre_stage:
        - risk-auditor
      post_stage:
        - mvp-freeze-architect
      
  - state: "PLANNING"
    entered_at: "2024-01-14T14:00:00Z"
    exited_at: "2024-01-15T10:00:00Z"
    duration_seconds: 72000
    artifacts:
      - tasks.md
    injected_skills:
      - iron-audit-pm
      
  - state: "DESIGNING"
    entered_at: "2024-01-15T10:00:00Z"
    current: true
    blocked_periods:
      - reason: "Waiting for PCI compliance consultation"
        started_at: "2024-01-15T14:00:00Z"
        resolved_at: "2024-01-16T09:00:00Z"
        duration_seconds: 68400

hooks:
  pre_stage:
    ANALYZING:
      - agent: "risk-auditor"
        config:
          focus: ["security", "compliance", "cost"]
    DESIGNING:
      - agent: "tech-design-reviewer"
        config:
          strict_mode: true
  post_stage:
    ANALYZING:
      - agent: "mvp-freeze-architect"
    IMPLEMENTING:
      - agent: "code-reviewer"
        config:
          security_focus: true
  on_enter_TESTING:
    - action: "invoke_agent"
      agent: "test-strategy-advisor"
      config:
        include_security_tests: true
        include_penetration_tests: true

waiting_info:
  dependency_type: "review"
  description: "Waiting for security architecture review"
  waiting_since: "2024-01-16T09:00:00Z"
  expected_resolution: "2024-01-16T14:00:00Z"
  contact: "security-team@company.com"

artifacts:
  - spec.md
  - tasks.md
  - design.md (in progress)
